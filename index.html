<!DOCTYPE html>
<html>
    <head>
        <title> My Experiment </title>
        <script src="https://unpkg.com/jspsych@7.3.3"></script>
        <script src="https://unpkg.com/@jspsych/plugin-html-keyboard-response@1.1.2"></script>
        <link href="https://unpkg.com/jspsych@7.3.3/css/jspsych.css" rel="stylesheet" type="text/css" />
        <script src="https://unpkg.com/@jspsych/plugin-survey-text@1.1.2"></script>
        <script src="jspsych/modified-image-plugin.js"> </script>
        <script src="sentences.js"> </script> 
        <script src="association.js"> </script> 
        <script src="priming.js"> </script> 
    </head>
    <body> </body>
    <script>
        const jsPsych = initJsPsych();
        var fixation= {
            type: jsPsychHtmlKeyboardResponse,
            stimulus: "+", 
            choices: "NO_KEYS",
            trial_duration: 500,
        }
        var sentence = {
         type: jsPsychHtmlKeyboardResponse,
         stimulus: jsPsych.timelineVariable('sentence'),
         choices: [" "],
         trial_duration: 10
        } 

        var training_procedure = {
            timeline: [sentence],
            timeline_variables: sentences, 
            randomize_order: true 
        };

        var attention = {
            type: jsPsychSurveyText,
            questions: [{prompt:"Type any ONE novel word from the previous sentence:"}]
        };

        var association = {
            type: jsPsychSurveyText,
            preamble:  "Respond with the first word comes to mind",
            questions: [{prompt:jsPsych.timelineVariable("cue")}],
            trial_duration: 10
        };

        var association_procedure = {
            timeline: [association],
            timeline_variables: association_cues, 
            randomize_order: true, 
            reptitions: 3
        };
        var training_plus_association =  {
            timeline: [training_procedure, association_procedure],
            reptitions: 3 
        }

        var image = {
            type: jsPsychImageKeyboardResponse,
            stimulus: jsPsych.timelineVariable('image_path'),
            choices: "NO_KEYS",
            trial_duration: 500,
            stimulus_width: 500,
            maintain_aspect_ratio: true,
            prompt: "<span style = 'font-size:170%'><br><br></span"
        }

        var prime = {
            type: jsPsychImageKeyboardResponse,
            stimulus: jsPsych.timelineVariable('image_path'),
            trial_duration: 300,
            choices: "NO_KEYS",
            stimulus_width: 500,
            maintain_aspect_ratio: true,
            prompt: jsPsych.timelineVariable('prime_word'),
        }
        var target = {
            type:jsPsychImageKeyboardResponse,
            stimulus: jsPsych.timelineVariable('image_path'),
            choices: ["A", "L"],
            stimulus_width: 500,
            maintain_aspect_ratio:true,
            prompt: jsPsych.timelineVariable('target_word'),
        }
        var priming_proc = {
            timeline: [fixation, image, prime, target],
            timeline_variables: practice_stimuli,
            randomize_order: true
        }
        jsPsych.run([training_plus_association, priming_proc])

      
    </script>
</html>
